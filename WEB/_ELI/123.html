<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>123</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" />
    <!-- Bootstrap  -->
    <style>
        #shopDiv {
            height: 678px;
            width: fit-content;
        }

        #shopGrid {
            width: 600px;
            margin: 0 auto;
            display: inline-block;
        }

        .arrowIcon {
            position: relative;
            top: -50%;
            transform: translateY(100%);
            height: 40px;
            margin: 20px;
            cursor: pointer;
        }

        .item {
            border: 1px solid #dae0e5;
            border-radius: 15px;
            margin: 5px;
            padding: 5px;
        }

        .item img {
            height: 100px;
        }

        .description {
            height: 45px;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            font-size: 13px;
            margin-bottom: 0;
        }

        .itemName {
            font-size: 14px;
        }

        .price {
            color: salmon;
            font-size: 18px;
        }

        .addToCartBtn {
            position: relative;
            float: left;
            margin-left: 20px;
        }

        .buyNowBtn {
            position: relative;
            float: right;
            margin-right: 20px;
        }
    </style>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
    <!-- BootstrapJS  -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- JQuery  -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
    <!-- Angular  -->
    <script>
        var shopItemsSuggestion = [];
        var shopItemsSuggestionHistory = [];
        var shopRowsSuggestion = 3;
        var shopColsSuggestion = 3;
        var currentSuggestionPage = -1;
        var fadeTimeout;
        var renderTimeout;

        $(function() {
            shopItemsSuggestion.push(new ShopItem('First Item', 'This is the first item that you\'\'ll ever see', 5.6, 'watch.png'));
            shopItemsSuggestion.push(new ShopItem('Second Item', 'This is the second item that you\'\'ll ever see', 456.99, '0.png'));
            shopItemsSuggestion.push(new ShopItem('Third Item', 'This is the third item that you\'\'ll ever see', 123.2, '1.png'));
            shopItemsSuggestion.push(new ShopItem('Fourth Item', 'This is the fourth item that you\'\'ll ever see', 20.09, '2.png'));
            shopItemsSuggestion.push(new ShopItem('Fifth Item', 'This is the fifth item that you\'\'ll ever see', 2.99, '3.png'));
            shopItemsSuggestion.push(new ShopItem('Sixth Item', 'This is the sixth item that you\'\'ll ever seed df d sfdksf dsfn dskf dksjm fjksd fmd sfmn dsnkmf kds fnkmsd fksd kf dskf mdn,sf ds fdk ', 125, '4.png'));
            shopItemsSuggestion.push(new ShopItem('Seventh Item', 'This is the first item that you\'\'ll ever see', 25.12, '5.png'));
            shopItemsSuggestion.push(new ShopItem('Eighth Item', 'This is the first item that you\'\'ll ever see', 100, '6.png'));
            shopItemsSuggestion.push(new ShopItem('Ninth Item', 'This is the first item that you\'\'ll ever see', 99.99, '7.png'));
            renderShop();
        });

        function ShopItem(_name, _description, _price, _img) {
            this.name = _name;
            this.description = _description;
            this.price = _price;
            this.intPrice = parseInt(_price);
            this.fractionPrice = this.price == this.intPrice ? '00' : ((_price * 100).toFixed(2) - this.intPrice * 100 < 10 ? '0' + ((_price * 100).toFixed(2) - this.intPrice * 100).toString() : (_price * 100).toFixed(2) - this.intPrice * 100);
            this.img = _img;
        }

        function renderShop() {
            var s = '';
            s += '<img src="back.png" class="arrowIcon" id="backBtn" name="back" onclick="handleArrowBtn(name)" />';
            s += '<div class="container" id="shopGrid">';
            for (var i = 0; i < shopRowsSuggestion; i++) {
                s += '<div class="row">';
                for (var j = 0; j < shopColsSuggestion; j++) {
                    s += '<div class="col-sm shadow item" style="display:none">';
                    s += '<img src="' + shopItemsSuggestion[i + j].img + '" class="mb-4 mx-auto d-block" />';
                    s += '<p class="description"><span class="itemName">' + shopItemsSuggestion[i * shopColsSuggestion + j].name + '</span><br />' + shopItemsSuggestion[i * shopColsSuggestion + j].description + '</p>';
                    s += '<p class="price my-1 float-right">$' + shopItemsSuggestion[i * shopColsSuggestion + j].intPrice + '.<sup>' + shopItemsSuggestion[i * shopColsSuggestion + j].fractionPrice + '</sup></p>';
                    //s += '<button class="addToCartBtn">Add To Cart</button>';
                    //s += '<button class="buyNowBtn">Buy Now</button>';
                    s += '</div>';
                }
                s += '</div>';
            }
            s += '</div>';
            s += '<img src="next.png" class="arrowIcon" id="nextBtn" name="next" onclick="handleArrowBtn(name)" />';
            $('#shopDiv').html(s);
            $('.item').fadeIn(1500);
            cngPage(true);
        }

        function handleArrowBtn(_dir) {
            /*clearTimeout(fadeTimeout);
            clearTimeout(renderTimeout);*/
            if (_dir == 'back')
                cngPage(false);
            else
                cngPage(true);
        }

        function cngPage(_next) {
            if ((_next && shopItemsSuggestionHistory.length - 1 == currentSuggestionPage) || (!_next && currentSuggestionPage == 0))
                getNewItems();
            else if (_next)
                shopItemsSuggestion = shopItemsSuggestionHistory[currentSuggestionPage++];
            else
                shopItemsSuggestion = shopItemsSuggestionHistory[currentSuggestionPage--];
            fadeTimeout = setTimeout(function() {
                $('.item').fadeOut(800);
            }, 5000);
            renderTimeout = setTimeout(renderShop, 5800);
        }

        pageMode = 0; // TODO: delete 'pageMode' when there is a server!! ONLY for DEMO
        function getNewItems() { // TODO: change function when there is a server!! ONLY for DEMO
            if (pageMode == 0) {
                shopItemsSuggestionHistory.push(shopItemsSuggestion);
                shopItemsSuggestion = [];
                shopItemsSuggestion.push(new ShopItem('Tenth Item', 'This is the first item that you\'\'ll ever see', 50.05, '8.png'));
                shopItemsSuggestion.push(new ShopItem('Eleventh Item', 'This is the first item that you\'\'ll ever see', 4.10, '9.png'));
                shopItemsSuggestion.push(new ShopItem('Twelveth Item', 'This is the first item that you\'\'ll ever see', 52.52, '10.png'));
                shopItemsSuggestion.push(new ShopItem('Thirteenth Item', 'This is the first item that you\'\'ll ever see', 25.12, '11.png'));
                shopItemsSuggestion.push(new ShopItem('Fourteenth Item', 'This is the first item that you\'\'ll ever see', 100, '12.png'));
                shopItemsSuggestion.push(new ShopItem('Fifteenth Item', 'This is the first item that you\'\'ll ever see', 99.99, '13.png'));
                shopItemsSuggestion.push(new ShopItem('Sixteenth Item', 'This is the first item that you\'\'ll ever see', 50.05, '14.png'));
                shopItemsSuggestion.push(new ShopItem('Seventeenth Item', 'This is the first item that you\'\'ll ever see', 4.10, '15.png'));
                shopItemsSuggestion.push(new ShopItem('Eighteenth Item', 'This is the first item that you\'\'ll ever see', 52.52, '16.png'));
                pageMode = 1;
            } else {
                shopItemsSuggestionHistory.push(shopItemsSuggestion);
                shopItemsSuggestion = [];
                shopItemsSuggestion.push(new ShopItem('First Item', 'This is the first item that you\'\'ll ever see', 5.6, 'watch.png'));
                shopItemsSuggestion.push(new ShopItem('Second Item', 'This is the second item that you\'\'ll ever see', 456.99, '0.png'));
                shopItemsSuggestion.push(new ShopItem('Third Item', 'This is the third item that you\'\'ll ever see', 123.2, '1.png'));
                shopItemsSuggestion.push(new ShopItem('Fourth Item', 'This is the fourth item that you\'\'ll ever see', 20.09, '2.png'));
                shopItemsSuggestion.push(new ShopItem('Fifth Item', 'This is the fifth item that you\'\'ll ever see', 2.99, '3.png'));
                shopItemsSuggestion.push(new ShopItem('Sixth Item', 'This is the sixth item that you\'\'ll ever seed df d sfdksf dsfn dskf dksjm fjksd fmd sfmn dsnkmf kds fnkmsd fksd kf dskf mdn,sf ds fdk ', 125, '4.png'));
                shopItemsSuggestion.push(new ShopItem('Seventh Item', 'This is the first item that you\'\'ll ever see', 25.12, '5.png'));
                shopItemsSuggestion.push(new ShopItem('Eighth Item', 'This is the first item that you\'\'ll ever see', 100, '6.png'));
                shopItemsSuggestion.push(new ShopItem('Ninth Item', 'This is the first item that you\'\'ll ever see', 99.99, '7.png'));
                pageMode = 0;
            }
            currentSuggestionPage++;
        }
    </script>
</head>

<body>
    <div class="container" id="shopDiv">
    </div>
</body>

</html>
